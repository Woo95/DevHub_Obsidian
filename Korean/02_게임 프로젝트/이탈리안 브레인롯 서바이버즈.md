# **이탈리안 브레인롯 서바이버즈** | [`게임하기`](https://naver.me/546Ro3q6)
---
## **개요**
이 프로젝트는 [[_자작 게임 프레임워크|자작 게임 프레임워크]]를 활용해 개발한 2D 서바이벌 액션 게임입니다. **게임 아티스트와 협업**하여, **이탈리안 브레인롯 밈을 활용한 뱀파이어 서바이버즈를 모작**을 성공적으로 완성했습니다. 또한, 프레임워크의 확장성과 재사용성을 검증하기 위한 실험적 프로젝트이기도 합니다.

[**저장소 보기**](https://github.com/Woo95/SDL2_Italian_Brainrot_Survivors)<br/>[**시연 보기**](https://youtu.be/KV2-Dnr4IIc)

---
## **게임 소개**
플레이어는 끝없이 몰려오는 적을 상대하여 최대한 생존해야 하며, 5분이 경과하면 최종 보스가 등장합니다. 적을 처치하여 경험치를 획득해서 무기와 파워업을 강화하며, 이를 활용해 생존 시간을 최대화해야 합니다. 또한, 게임 시작 전에 파워업을 구매하여 초반 생존을 강화할 수 있습니다.
![[Italian Brainrot Survivors (Media)#^b8a5d5]]

---
## **핵심 기능**

> ⚠️ 참고: 아래의 코드 예제들은 **간소화된 버전**입니다.
### `1. CSV 데이터 파일 기반 관리 시스템`
모든 게임 관련 데이터(몹, 무기, 파워업 등)는 **CSV 파일로 관리**하여, **코드 수정 없이 CSV 파일만 수정**하여 **손쉽게 밸런스 조정과 콘텐츠 확장**이 가능합니다.
![[Italian Brainrot Survivors (Media)#^ba4fe5]]

프로그램 실행 시 `CEngine::Init()`에서 `CDataLoader` 인스턴스를 생성 및 초기화하여 모든 CSV 데이터 파일을 읽어드려 데이터를 저장합니다.

![[Italian Brainrot Survivors (Code)#^4357bd]]
이를 통해 개발자는 코드 수정 없이 데이터만으로 게임 밸런스를 유연하게 조정할 수 있습니다. 이 구조는 유지보수성과 확장성을 모두 고려한 데이터 중심 설계의 핵심이라 할 수 있습니다.

---
### `2. 스크롤 환경 시스템 구성`
![[Italian Brainrot Survivors (Media)#^a2f6d9]]
카메라 이동에 따라 **단일 텍스처만으로도 끝없는 맵처럼 보이도록 스크롤**됩니다. **오브젝트는 일정 거리(`snap distance`) 이상 이동했을 때만 위치가 보정**되어, 맵과 환경이 자연스럽게 동기화된 **스크롤 효과를 효율적으로 구현**합니다.

---
![[Italian Brainrot Survivors (Media)#^9985f3]]
위 이미지는 **실제 구현에서는 단일 텍스처를 사용**하지만, 시각적 이해를 돕기 위해 4개의 텍스처를 결합한 예시로 구성했습니다. 이를 통해 **동일한 환경 오브젝트 간 간격**, **맵 단위 배치**, 그리고 **위치 보정 판단 기준인 일정 거리**(`snap distance`)의 개념을 직관적으로 표현합니다.

---
#### `CScrollMapComponent 클래스`
**맵이 반드시 스크롤되는 형태가 아닐 수 있기 때문에**, **스크롤 맵 컴포넌트로 구현**했습니다. 그래서 현재 게임에서 사용하는 맵은 `CScrollMapComponent`를 추가하여 사용합니다.

![[Italian Brainrot Survivors (Code)#^207b8a]]
카메라 좌표를 기준으로 **단일 텍스처의 일부만 잘라 출력**하는 방식입니다. 카메라가 텍스처 내부에 있을 때는 해당 영역만 출력하고, 경계를 넘어가면 넘어간 방향에 따라 **텍스처를 2등분 또는 4등분으로 나누어 출력**하여 **하나의 텍스처로 무한히 이어지는 스크롤 맵 효과**를 구현합니다.

---
#### `CScrollEnvObj 클래스`
**스크롤 맵을 위한 환경 오브젝트 클래스**입니다. 처음엔 이 로직을 **컴포넌트로 분리하는 것도 고려**했지만, 스프라이트나 콜라이더 등 **여러 컴포넌트를 함께 이동**하기 때문에 **오브젝트 단위로 처리**하는 편이 **단순하고 명확**하다고 판단했습니다.

![[Italian Brainrot Survivors (Code)#^7dbaf2]]
`CScrollEnvObj`는 카메라 위치를 참조하여, 환경 오브젝트가 **일정 거리**(`snap distance`)를 **초과하여 떨어지면** 카메라와의 상대 방향을 계산하고, 이를 **x, y 방향 단위로 정규화한 뒤 맵 스케일을 곱해 이동 거리를 산출**하여 **환경 오브젝트 위치를 효율적으로 1회 이동**합니다.

---
### `3. 몹 소환 및 재소환 시스템`
![[Italian Brainrot Survivors (Media)#^a94b37]]
`CMobSpawner` 클래스는 **카메라 주변 일정 범위 내에서 몹을 무작위로 소환**합니다. 카메라 주변을 4개의 테두리 영역으로 나눈 뒤, 그 중 하나를 선택하여 해당 영역 안에서 랜덤한 위치로 소환함으로써, **플레이어 주변에 동등한 확률로 적이 등장**하도록 합니다.

---
![[Italian Brainrot Survivors (Media)#^797744]]
 플레이어로부터 **일정 거리 이상 떨어진 몹은 다시 위치를 갱신해 재소환**됩니다. 이 과정을 통해 플레이어 **주변에는 항상 적이 존재하고 긴장감이 끊기지 않도록 유지**됩니다.

---
#### `CMobSpawner 클래스 - 핵심 함수들`
##### `함수 #1: 몹 스포너 업데이트 함수`
![[Italian Brainrot Survivors (Code)#^d971b1]]
**매 프레임마다 호출되어 몹 소환/재소환을 관리**합니다. 시간 간격을 줄여가며, 조건이 충족되면 `SpawnMob()`과 `RespawnMob()`을 실행합니다. **플레이어가 존재하지 않는 상황에서는 불필요한 계산을 하지 않고 바로 종료**합니다.

---
##### `함수 #2: 몹 소환 함수`
![[Italian Brainrot Survivors (Code)#^0425f5]]
**일정한 주기마다 일반 몹과 중간 보스를 소환**합니다. 소환된 몹들은 [[Italian Brainrot Survivors (Code)#^b7fa85|GetRandomSpawnPos()]]로 계산된 **카메라 주변의 무작위 위치에 등장**하며, **반복될수록 새로운 종류의 몹이 해금**되어 점차 더 강한 적들이 추가됩니다.

---
##### `함수 #3: 몹 재소환 함수`
![[Italian Brainrot Survivors (Code)#^791190]]
카메라 화면 밖, 일정 거리 이상 떨어진 몹은 [[Italian Brainrot Survivors (Code)#^b7fa85|GetRandomSpawnPos()]]로 계산된 위치에 다시 재소환하여 **항상 플레이어 주변에 적이 존재하도록 유지**합니다.

---
### `4. 플레이어: 능력치, 인벤토리, 무기 연관성`
기본적으로 플레이어는 **능력치 컴포넌트**와 **인벤토리 컴포넌트**를 보유합니다.
- **능력치 컴포넌트**:
	- 플레이어의 **기본 능력치와 아이템 능력치 데이터를 관리**합니다.
- **인벤토리 컴포넌트**:
	- 플레이어가 소유한 **여러 무기 컴포넌트를 관리**합니다.
- **무기 컴포넌트**:
	- 무기가 발사하는 **투사체를 생성하고 초기 상태를 설정**합니다.

---
#### `무기를 사용한 투사체 발사 및 공격력 적용 과정`
##### 0. 연관성 설계도
![[Player - Correlation of Stats, Inventory, and Weapons_Kor.png]]

플레이어와 무기의 관계를 간결하게 나타낸 연관성 설계도입니다. 무기로 공격할 때는 투사체를 생성하고, 플레이어와 무기의 공격력을 합산한 총 데미지를 계산하여 투사체에 적용합니다.

---
##### 1. 투사체 생성 및 데미지 설정
![[Italian Brainrot Survivors (Code)#^1fbde8]]
해당 무기로 공격할 때는 효과음을 재생한 뒤 투사체를 생성 및 초기화하며, **소유자와 무기의 공격력을 합산**해 **투사체에 적용**합니다. **이 방식의 장점**은, **이미 발사된 투사체는 이후 파워업으로 공격력이 변경되어도 영향을 받지 않는다**는 점입니다.

---
##### 2. 플레이어 공격력 계산
![[Italian Brainrot Survivors (Code)#^e8745e]]
플레이어의 공격력은 기본 공격력에 **아이템 능력치 보너스**를 **합산하여 계산**됩니다. **이 방식의 장점**은, **디버깅과 유지보수가 용이**하고, 새로운 무기나 능력치 시스템을 추가할 때 **기존 코드를 최소한으로 수정하면서 확장할 수 있다**는 점입니다.

---
## **맺는 말**
> [[_자작 게임 프레임워크|자작 게임 프레임워크]]를 활용해 게임을 개발하는 과정에서 예상하지 못했던 문제들을 발견하고 보완하며, **더 나은 구조와 안정성을 갖춘 프레임워크로 발전**시킬 수 있었습니다. 이번 프로젝트는 **자작 게임 프레임워크를 개선**하고 **이를 활용해 게임을 제작하는 과정**을 동시에 경험한 의미 있는 프로젝트였습니다.